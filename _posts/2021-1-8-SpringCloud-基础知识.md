---
title: SpringCloud学习-基础知识
date: 2021-1-8 23:29:53
categories:
- Spring
tags:
- Spring
---

## 1、什么是微服务？

​      **微服务**是系统架构上的一种设计风格，它的主旨是将一个原本独立的系统拆分成多个小型微服务，这些小型微服务都在各自独立的进程中运行，服务之间通过基于HTTP的RESTFUL API进行通信协作。被拆分的每一个小型服务都围绕着系统的某一项或一些耦合度较高的业务功能进行构建，并且每个服务都维护着自身的数据存储、业务开发、自动化测试案例以及独立部署机制。由于有了轻量级的通信协作基础，所有这些微服务可以使用不同的语言来编写。

## 2、单体服务的优缺点

### 优点：

-  **便于共享**：单个归档文件包含所有功能，便于在团队之间以及不同的部署阶段之间共享。
-  **易于测试**：单体应用一旦部署，所有的服务或特性就都可以使用了，这简化了测试过程，因为没有额外的依赖，每项测试都可以在部署完成后立刻开始。
-  **易于部署**：只需将单个归档文件复制到单个目录下。

### 缺点：

- **复杂性高**：由于是单个归档文件，所以整个项目文件包含的模块非常多，导致模块的边界模糊、依赖关系不清晰、代码的质量参差不齐，混乱的堆在一起，使得整个项目非常复杂。以致每次修改代码，都非常小心，可能添加一个简单的功能，或者修改一个Bug都会带来隐藏的缺陷。
- **技术债务**：随着时间的推移、需求的变更和技术人员的更替，会逐渐形成应用程序的技术债务，并且越积越多。
- **扩展能力受限**：单体应用只能作为一个整体进行扩展，无法根据业务模块的需要进行伸缩。
- **阻碍技术创新**：对于单体应用来说，技术是在开发之前经过慎重评估后选定的，每个团队成员都必须使用相同的开发语言、持久化存储及消息系统。

## 3、微服务的优缺点

### 优点：

- 易于开发和维护：一个微服务只会关注一个特定的业务功能，所以业务清晰、代码量较少。开发和维护单个微服务相对简单。
- 单个微服务启动较快
- 局部修改容易部署：单体应用只要有修改，就得重新部署整个应用。微服务解决了这样的问题。一般来说，对某个微服务进行修改，只需要重新部署这个服务即可。
- 技术栈不受限制：在微服务架构中，可以结合项目业务及团队的特点，合理的选择技术栈。
- 按需伸缩：可根据需求，实现细粒度的扩展。

### 缺点：

- 运维要求高：更多的服务意味着要投入更多的运维。
-  分布式固有的复杂性：使用微服务构建的是分布式系统。对于一个分布式系统，系统容错、网络延迟、分布式事务等都会带来巨大的问题。
-  接口调整成本高：微服务之间通过接口进行通信。如果修改某一个微服务的API，可能所有用到这个接口的微服务都需要进行调整。

## 4、微服务架构9大特性

**服务组件化**：

​    在微服务架构中，需要我们对服务进行组件化分解，服务是一种进程外的组件，它通过HTTP等通信协议进行协作，而不是像传统组件那样镶入式的方式协同工作，每一个服务都独立开发、部署、可以有效避免一个服务的修改引起整个系统的重新部署。

**按业务组织团队**：

​     在实施微服务架构时，需要采用不同的团队分割方法。由于每一个服务都是针对特定的业务的宽栈或者全栈实现的，纪要负责数据的持久化存储，又要负责用户接口定义等各种跨专业领域的职能。因此面对大型项目的时候，对于微服务团队的拆分更加建议按业务线的方法进行拆分，一方面可以有效的减少服务内部修改所产生的内耗，另一方面，团队边界可以变得更为清晰。

 **做产品的态度**：

​    在微服务架构团队中，每个小团队都应该以做产品的方式，，对其整个生命周期负责，而不是像传统项目开发那样，交付给测试，运维为目标

**智能端点和哑管道**：

​     由于各个服务不在一个进程中，组件间的通信模式发生了改变，原本进程内的方法调用变成了RPC方式的调用，会导致微服务之间产生烦琐的通信，使得系统表现更为糟糕，所以我们需要更粗粒度的通信协议：

   在微服务架构中，通常会使用一下两种服务调用方法：    

1. 使用HTTP的RESTful API或者轻量级的消息发送协议，实现消息传递与服务调用的处触发。   
2. 通过在轻量级消息总线上传递消息，类似RabbitMQ等一些提供可靠异步交换的中间体。

   在极度强调性能的情况下，还有可能会使用二进制的消息发送协议，例如protobuf

**去中心化治理**：

​     在整个微服务架构，通过采用轻量级的契约定义接口，使得我们队服务本身的具体技术平台不再那么敏感，这样整个微服务架构系统中的各个组件就能针对不同的业务特点选择不同的技术平台。

**去中心化管理数据**：

​      在实施微服务架构时，希望每一个服务自己来管理其数据库，这就是数据管理的去中心化，虽然数据管理的去中心化让数据管理更加细致化，让数据存储和性能达到最优，但是不同的数据库实例，数据一致性也成了微服务架构中亟待解决的问题之一，分布式事务本身实现的难度就非常大，所以在微服务架构中，我们更强调各服务之间进行”无事务“的调用，而对数据一致性，只要求数据在最后的处理状态是一致的即可。

**基础设施自动化**：

​     在微服务架构中，务必从一开始就构建起”持续交付“平台来支撑整个实施过程；    

**通错设计**：

​     在微服务架构中，快速检测出故障源并尽可能地自动恢复服务是必须被设计考虑的，通常我们都希望在每个服务中实现监控和日志记录的组件。比如：服务状态、断路器状态、吞吐量、网络延迟等关键数据的仪表盘等。

## 5、为什么选择SpringCloud？

国内一些在微服务架构中针对不同场景出现的各种问题的各种解决办法和开源框架：

- 服务治理：阿里巴巴的Dubbo和当当网的DubboX、Netflix的Eureka、Apache的Consul等。
- 分布式配置管理：百度的Disconf、Netflix的Archaius、360的QConf、SpringCloud的Config、淘宝的Diamond等
- 批量任务：当当网的Elastic-Job、LinkedLn的Azkaban、SpringCloud的Task等。
- 服务跟踪：京东的Hydra、SpringCloud的Sleuth、Twitter的Zipkin等。

**SpringCloud不像我们之前列举的那些框架一样只解决微服务中的某一个问题，而是一个解决微服务架构实施的综合性解决框架。**







